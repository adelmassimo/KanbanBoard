<div class="p-3  text-break" [ngStyle]="{'background' : coloreSfondo}">
  <div class="row mr-3 d-flex justify-content-end">
    <div *ngIf="!modificaSelezionata && !modifichePrecedenti" class="col">
      <button class="btn bottone" title="Modifiche Precedenti" (click)="openStoricoModifiche()">
        <i class="fas fa-clipboard-list"></i>
      </button>
    </div>
    <div *ngIf="!modificaSelezionata && modifichePrecedenti" class="col">
        <button class="btn bottone" title="Indietro" (click)="closeStoricoModifiche()">
          <i class="fas fa-chevron-left"></i>
        </button>
      </div>
    <div *ngIf="modificaSelezionata" class="col">
      <button class="btn bottone" title="Indietro" (click)="colseModificaSelezionata()">
        <i class="fas fa-chevron-left"></i>
      </button>
    </div>
    <div *ngIf="modificaSelezionata" class="col-10 d-flex justify-content-end">
        {{postItModifica.data | date:'medium'}} - {{postItModifica.nome_utente}} {{postItModifica.cognome_utente}}
    </div>
    <div *ngIf="!modifica && !modificaSelezionata" class="col-1 mr-3">
      <button class="btn bottone" title="Modifica" (click)="openModifica()">
        <i class="fas fa-pencil-alt"></i>
      </button>
    </div>
    <div *ngIf="!modifica && !modificaSelezionata" class="col-1 mr-3">
      <button class="btn bottone" title="Elimina" (click)="delete()">
        <i class="fas fa-trash-alt"></i>
      </button>
    </div>
    <div *ngIf="modifica" class="col-1 mr-3">
      <button class="btn bottone" title="Salva" (click)="save()">
        <i class="far fa-save"></i>
      </button>
    </div>
    <div *ngIf="modifica" class="col-1 mr-3">
      <button class="btn bottone" title="Annulla" (click)="annulla()">
        <i class="fas fa-undo"></i>
      </button>
    </div>
  </div>
  <div class="row mr-3 d-flex">
    <div class="col px-5">
      <h1 *ngIf="!modifica && !modifichePrecedenti" mat-dialog-title>{{post.nome_postIt}}</h1>
      
      <h1 *ngIf="modificaSelezionata" mat-dialog-title>{{postItModifica.nome_postIt}}</h1>
      <h1 *ngIf="!modificaSelezionata && modifichePrecedenti && !modifica" mat-dialog-title>Storico delle Modifiche</h1>
      
      <mat-form-field *ngIf="modifica" class="w-75">
        <input matInput placeholder="Titolo" name="titolo" [(ngModel)]="titolo">
      </mat-form-field>
    </div>
  </div>


  <mat-dialog-content>

    <div *ngIf="!modifica && !modifichePrecedenti" class="row d-flex justify-content-end">
      <div class="col pl-5">
        {{post.descrizione_postIt}}
      </div>
    </div>
    <!--start form modifica-->

    <div *ngIf="modifica" class="row d-flex justify-content-end">
      <div class="col pl-5">
        <div class="d-flex justify-content-center">
          <mat-form-field class="w-75">
            <textarea rows="3" matInput placeholder="Descrizione" type="text" name="descrizione"
              [(ngModel)]="descrizione" value="{{post.descrizione_postIt}}"></textarea>
          </mat-form-field>
        </div>
        <div class="d-flex justify-content-center">
          <mat-form-field class="w-75">
            <mat-label>Colore POST-IT</mat-label>
            <mat-select [formControl]="panelColor" panelClass="example-panel-{{panelColor.value}}" id="colore_postIt"
              name="colore_postIt">
              <mat-option value="#FF6347" (click)="onChangeColor()">Rosso</mat-option>
              <mat-option value="#98FB98" (click)="onChangeColor()">Verde</mat-option>
              <mat-option value="#87CEEB" (click)="onChangeColor()">Blu</mat-option>
              <mat-option value="#f7a1f3" (click)="onChangeColor()">Rosa</mat-option>
              <mat-option value="#f9fab1" (click)="onChangeColor()">Giallo</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="d-flex justify-content-center">
          <mat-form-field class="w-75">
            <mat-label>Tipologia</mat-label>
            <mat-select [formControl]="typePost" panelClass="example-panel" id="tipologia" name="tipologia"
              [ngStyle]="{'background' : coloreSfondo}">
              <mat-option value="to do">TO DO</mat-option>
              <mat-option value="doing">DOING</mat-option>
              <mat-option value="done">DONE</mat-option>
              <mat-option value="accepted">DONE ACCEPTED</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
    </div>
    <!--end form modifica-->

    <!--start modifiche precedenti-->
    <div *ngIf="modifichePrecedenti && !modificaSelezionata && !modifica" class="col pl-3">
      <!--`id_postItOld`, `nome_PostItNew`, `descrizione_postItNew`, `colore_postItNew`, `tipologiaNew`-->
      <div *ngFor="let modifica of storicoModifiche">
        <div class="row" (click)="showModifica(modifica)">
          <div class="col-7 my-2">
            {{modifica.data | date:'medium'}}
          </div>
          <div class="col my-2 d-flex justify-content-end">
            {{modifica.nome_utente}} {{modifica.cognome_utente}}
          </div>
        </div>
        <div class="row">
          <div class="col">
            <mat-divider></mat-divider>
          </div>
        </div>
      </div>

    </div>
    <!--end modifiche precedenti-->

    <!--start modifica seelezionata-->
    <div *ngIf="modificaSelezionata" class="row d-flex justify-content-end">
      <div class="col pl-5">
        {{postItModifica.descrizione_postIt}}
      </div>
    </div>
    <!--end modifica selezionata-->

  </mat-dialog-content>

  <mat-dialog-actions>

    <div class="row w-100">
      <!-- <div class="col-9">
       <button class="mat-stroked-button" color="primary" (click)="close()">Chiudi</button>
        <button *ngIf="modifica" class="mat-stroked-button ml-3" color="primary" (click)="save()">Salva</button>
        <button *ngIf="modifica" class="mat-stroked-button ml-3" color="primary" (click)="annulla()">Annulla</button>
      </div>-->
      <div class="col d-flex justify-content-end">
        #{{post.id_postIt}}
      </div>
    </div>
  </mat-dialog-actions>

</div>