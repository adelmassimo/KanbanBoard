<div class="titoloProgetto">
  <h1 class="nomeProgetto">Crea post-it</h1>
</div>
<div class="container row my-3 mx-3 d-flex justify-content-center">

  <mat-tab-group mat-align-tabs="center" class="col-8">

    <!-- POST-IT -->

    <mat-tab label="Post-it" #postIt>
      <div class="creazionePostIt">
        <!--TITOLO POST-IT-->
        <div class="mb-3 d-flex justify-content-center">
          <mat-form-field class="w-75">
            <input matInput placeholder="Inserisci il titolo..." id="nome_postIt" name="nome_postIt"
              [(ngModel)]="nome_postIt">
          </mat-form-field>
        </div>
        <!--DESCRIZIONE POST-IT-->
        <div class="mb-3 d-flex justify-content-center">
          <mat-form-field class="w-75">
            <textarea matInput placeholder="Inserisci la descrizione..." type="text" id="descrizione_postIt"
              name="descrizione_postIt" [(ngModel)]="descrizione_postIt"></textarea>
          </mat-form-field>
        </div>

        <!-- SCELTA COLORE -->

        <div class="mb-3 d-flex justify-content-center">
          <mat-form-field class="w-75">
            <mat-label>Colore POST-IT</mat-label>
            <mat-select [formControl]="panelColor" panelClass="example-panel-{{panelColor.value}}" id="colore_postIt"
              name="colore_postIt">
              <mat-option value="#FF6347">Rosso</mat-option>
              <mat-option value="#98FB98">Verde</mat-option>
              <mat-option value="#87CEEB">Blu</mat-option>
              <mat-option value="#f7a1f3">Rosa</mat-option>
              <mat-option value="#f9fab1">Giallo</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- [ngStyle]="{'background': panelColor.value, 'color': '#fff'}" -->


        <!-- SCELTA TIPOLOGIA COLONNA DELLA LAVAGNA -->

        <div class="mb-3 d-flex justify-content-center">
          <mat-form-field MatFormFieldControl class="w-75">
            <mat-label>Tipologia</mat-label>
            <mat-select [formControl]="typePost" panelClass="example-panel-{{typePost.value}}" id="tipologia"
              name="tipologia">
              <mat-option value="{{col}}" *ngFor="let col of colonne">{{col}}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- SCELTA DIFFICOLTA'-->

        <div class="mb-3 d-flex justify-content-center">
          <mat-form-field class="w-75">
            <mat-label>Story points</mat-label>
            <mat-select [formControl]="difficoltaPost" panelClass="example-panel-{{difficoltaPost.value}}"
              id="difficolta" name="difficolta">
              <mat-option value="0">0</mat-option>
              <mat-option value="0.5">1/2</mat-option>
              <mat-option value="1">1</mat-option>
              <mat-option value="2">2</mat-option>
              <mat-option value="3">3</mat-option>
              <mat-option value="5">5</mat-option>
              <mat-option value="8">8</mat-option>
              <mat-option value="13">13</mat-option>
              <mat-option value="20">20</mat-option>
              <mat-option value="60">60</mat-option>
              <mat-option value="100">100</mat-option>
              <mat-option value="?">?</mat-option>
            </mat-select>
          </mat-form-field>
        </div>


        <!--SALVA E ANNULLA-->
        <div class="mb-3 d-flex justify-content-center">
          <button class="btn btn-primary" (click)="onSaveSubmit()">Salva</button>
          <button class="btn btn-danger stacca" (click)="onCancelSubmit()">Annulla</button>
        </div>
        <div *ngIf="error" class="alert alert-danger bottoni" role="alert" style="margin-top: 15px;">
          {{myMessage}}
        </div>
        <div *ngIf="aggiunto" class="alert alert-success bottoni" role="alert" style="margin-top: 15px;">
          {{myMessage}}
        </div>
      </div>


    </mat-tab>

    <!-- EPICA -->

    <mat-tab label="Epica" #epica>
      <!-- primo form EPICA -->
      <div class="creazionePostIt" *ngIf="epica.isActive && !isGo">

        <!--TITOLO EPICA-->
        <div class="mb-3 d-flex justify-content-center">
          <mat-form-field class="w-75">
            <input matInput placeholder="Inserisci il titolo..." id="nome_epica" name="nome_epica"
              [(ngModel)]="nome_epica">
          </mat-form-field>
        </div>
        <!--DESCRIZIONE EPICA-->
        <div class="mb-3 d-flex justify-content-center">
          <mat-form-field class="w-75">
            <textarea matInput placeholder="Inserisci la descrizione..." type="text" id="descrizione_epica"
              name="descrizione_epica" [(ngModel)]="descrizione_epica"></textarea>
          </mat-form-field>
        </div>

        <!-- SCELTA COLORE EPICA -->

        <div class="mb-3 d-flex justify-content-center">
          <mat-form-field class="w-75">
            <mat-label>Colore EPICA</mat-label>
            <mat-select [formControl]="panelColorEpic" panelClass="example-panel-{{panelColorEpic.value}}"
              id="colore_epica" name="colore_epica">
              <mat-option value="#FF6347">Rosso</mat-option>
              <mat-option value="#98FB98">Verde</mat-option>
              <mat-option value="#87CEEB">Blu</mat-option>
              <mat-option value="#f7a1f3">Rosa</mat-option>
              <mat-option value="#f9fab1">Giallo</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- SCELTA TIPOLOGIA COLONNA DELLA LAVAGNA -->

        <div class="mb-3 d-flex justify-content-center">
          <mat-form-field MatFormFieldControl class="w-75">
            <mat-label>Tipologia</mat-label>
            <mat-select [formControl]="typePost" panelClass="example-panel-{{typePost.value}}" id="tipologia"
              name="tipologia">
              <mat-option value="{{col}}" *ngFor="let col of colonne">{{col}}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- SCELTA DIFFICOLTA'-->

        <div class="mb-3 d-flex justify-content-center">
          <mat-form-field class="w-75">
            <mat-label>Story points</mat-label>
            <mat-select [formControl]="difficoltaEpicaControl"
              panelClass="example-panel-{{difficoltaEpicaControl.value}}" id="difficoltaEpica" name="difficoltaEpica">
              <mat-option value="0">0</mat-option>
              <mat-option value="0.5">1/2</mat-option>
              <mat-option value="1">1</mat-option>
              <mat-option value="2">2</mat-option>
              <mat-option value="3">3</mat-option>
              <mat-option value="5">5</mat-option>
              <mat-option value="8">8</mat-option>
              <mat-option value="13">13</mat-option>
              <mat-option value="20">20</mat-option>
              <mat-option value="60">60</mat-option>
              <mat-option value="100">100</mat-option>
              <mat-option value="?">?</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Numero post-it figli -->
        <div class="mb-3 d-flex justify-content-center" *ngIf="!isCreate">
          <mat-form-field class="w-75">
            <input matInput type="number" min="0" placeholder="Numero post-it dipendenti" name="numero_dipendenti"
              [(ngModel)]="numero_dipendenti">
          </mat-form-field>
        </div>
      </div>

      <!-- secondo form EPICA -->
      <div class="mb-3 d-flex flex-column" *ngIf="epica.isActive && isGo">
        <div class="titoloNominaDipendenti">
          <h3>Nomina i post-it dipendenti</h3>
        </div>
        <!-- Inizio elenco post-it dipendenti -->
        <div *ngFor="let post of arrayPostIt; let i = index;" class="contenitore">
          <h4 class="titoloPostIt">{{i+1}}. Post-it</h4>

          <!-- Nome post-it -->
          <div class="mb-3 d-flex justify-content-center">
            <mat-form-field class="w-75">
              <input matInput placeholder="Nome post-it" name="post.nome_postIt" [(ngModel)]="post.nome_postIt">
            </mat-form-field>
          </div>
          <!-- Descrizione post-it -->
          <div class="mb-3 d-flex justify-content-center">
            <mat-form-field class="w-75">
              <input matInput placeholder="Descrizione post-it" name="post.descrizione_postIt"
                [(ngModel)]="post.descrizione_postIt">
            </mat-form-field>
          </div>

          <!-- Colore post-it -->
          <div class="mb-3 d-flex justify-content-center">
            <mat-form-field class="w-75">
              <mat-label>Colore post-it</mat-label>
              <mat-select [formControl]="panelColor" panelClass="example-panel-{{panelColor.value}}"
                name="post.colore_postIt" [(ngModel)]="post.colore_postIt">
                <mat-option value="#FF6347">Rosso</mat-option>
                <mat-option value="#98FB98">Verde</mat-option>
                <mat-option value="#87CEEB">Blu</mat-option>
                <mat-option value="#f7a1f3">Rosa</mat-option>
                <mat-option value="#f9fab1">Giallo</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <!-- Tipologia post-it -->
          <div class="mb-3 d-flex justify-content-center">
            <mat-form-field MatFormFieldControl class="w-75">
              <mat-label>Tipologia</mat-label>
              <mat-select [formControl]="typePost" panelClass="example-panel-{{typePost.value}}" name="post.tipologia"
                [(ngModel)]="post.tipologia">
                <mat-option value="{{col}}" *ngFor="let col of colonne">{{col}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <!-- Difficolta post-it -->
          <div class="mb-3 d-flex justify-content-center">
            <mat-form-field class="w-75">
              <mat-label>Story points</mat-label>
              <mat-select [formControl]="difficoltaPost" panelClass="example-panel-{{difficoltaPost.value}}"
                name="post.difficolta" [(ngModel)]="post.difficolta">
                <mat-option value="0">0</mat-option>
                <mat-option value="0.5">1/2</mat-option>
                <mat-option value="1">1</mat-option>
                <mat-option value="2">2</mat-option>
                <mat-option value="3">3</mat-option>
                <mat-option value="5">5</mat-option>
                <mat-option value="8">8</mat-option>
                <mat-option value="13">13</mat-option>
                <mat-option value="20">20</mat-option>
                <mat-option value="60">60</mat-option>
                <mat-option value="100">100</mat-option>
                <mat-option value="?">?</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <hr>

          <!-- -->
        </div>
      </div>
      <!-- Fine elenco post-it dipendenti -->


      <!--AVANTI E ANNULLA-->
      <div class="mb-3 d-flex justify-content-center" *ngIf="!isGo">
        <button class="btn btn-primary" (click)="onGoSubmit()">Avanti</button>
        <button class="btn btn-danger stacca" (click)="onCancelSubmit()">Annulla</button>
      </div>
      <!--SALVA E INDIETRO-->
      <div class="mb-3 d-flex justify-content-center" *ngIf="isGo">
        <button class="btn btn-primary" (click)="onSaveEpicSubmit()">Salva</button>
        <button class="btn btn-danger stacca" (click)="onReturnSubmit()">Indietro</button>
      </div>


      <div *ngIf="error" class="alert alert-danger bottoni" role="alert" style="margin-top: 15px;">
        {{myMessage}}
      </div>
      <div *ngIf="aggiunto" class="alert alert-success bottoni" role="alert" style="margin-top: 15px;">
        {{myMessage}}
      </div>

    </mat-tab>
  </mat-tab-group>

  <!-- rappresentazione POST-IT dipendente alla epica -->
  <div *ngIf="epica.isActive && isGo">
    <div *ngFor="let post of arrayPostIt; let i = index;" [ngStyle]="{'top.px': (490*i+450)}"
      class="d-flex justify-content-center align-items-center flex-column anteprimaDipendente col-2">
      <h2 class="titAnt">post-it</h2>
      <mat-card class="postIt" [ngStyle]="{'background' : post.colore_postIt}">
        <mat-card-title class="postIt-title">{{post.nome_postIt}}</mat-card-title>
        <mat-card-content class="postIt-desc">{{post.descrizione_postIt}}</mat-card-content>
      </mat-card>
    </div>
  </div>
  <!-- -->

  <!-- rappresentazione grafica del post-it -->
  <div *ngIf="postIt.isActive" class="col-2 d-flex justify-content-center align-items-center flex-column anteprima">
    <h2 class="titAnt">Anteprima</h2>
    <mat-card class="postIt" [ngStyle]="{'background' : colore_postIt}">
      <mat-card-title class="postIt-title">{{nome_postIt}}</mat-card-title>
      <mat-card-content class="postIt-desc">{{descrizione_postIt}}</mat-card-content>
    </mat-card>
  </div>

  <!-- rappresentazione grafica della epica -->
  <div *ngIf="epica.isActive && antEpica"
    class="col-2 d-flex justify-content-center align-items-center flex-column anteprimaEpica">
    <h2 class="titAnt">Epica</h2>
    <mat-card class="epica" [ngStyle]="{'background' : colore_epica}">
      <mat-card-title class="postIt-title">{{nome_epica}}</mat-card-title>
      <mat-card-content class="postIt-desc">{{descrizione_epica}}</mat-card-content>
    </mat-card>
  </div>
  <!-- -->
</div>